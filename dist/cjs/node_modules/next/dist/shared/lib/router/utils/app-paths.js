'use strict';

var appPaths = require('../../../../../../../_virtual/app-paths.js');
var ensureLeadingSlash = require('../../page-path/ensure-leading-slash.js');
var segment = require('../../segment.js');

var hasRequiredAppPaths;
function requireAppPaths() {
  if (hasRequiredAppPaths) return appPaths.__exports;
  hasRequiredAppPaths = 1;
  (function (exports) {

    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    function _export(target, all) {
      for (var name in all) Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
      });
    }
    _export(exports, {
      normalizeAppPath: function () {
        return normalizeAppPath;
      },
      normalizeRscURL: function () {
        return normalizeRscURL;
      }
    });
    const _ensureleadingslash = ensureLeadingSlash.__require();
    const _segment = segment.__require();
    function normalizeAppPath(route) {
      return (0, _ensureleadingslash.ensureLeadingSlash)(route.split('/').reduce((pathname, segment, index, segments) => {
        // Empty segments are ignored.
        if (!segment) {
          return pathname;
        }
        // Groups are ignored.
        if ((0, _segment.isGroupSegment)(segment)) {
          return pathname;
        }
        // Parallel segments are ignored.
        if (segment[0] === '@') {
          return pathname;
        }
        // The last segment (if it's a leaf) should be ignored.
        if ((segment === 'page' || segment === 'route') && index === segments.length - 1) {
          return pathname;
        }
        return pathname + "/" + segment;
      }, ''));
    }
    function normalizeRscURL(url) {
      return url.replace(/\.rsc($|\?)/,
      // $1 ensures `?` is preserved
      '$1');
    }
  })(appPaths.__exports);
  return appPaths.__exports;
}

exports.__require = requireAppPaths;
//# sourceMappingURL=app-paths.js.map
